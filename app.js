'use strict'

import "/JsBarcode.all.min.js";

const createBarCode = (number) => {
  let barCode = '2220000000000'
  let slicer = barCode.length - String(number).length
  return barCode.slice(0, slicer) + String(number)

  
}


const Cells = {
  cell_b1: {
    name: 'б1',
    '1а': 48,
    '1б': 31,
    '1в': 24,
    '1г': 17,
    '2а': 1472,
    '2б': 1465,
    '2в': 1458,
    '2г': 1557,
    '3а': 1632,
    '3б': 1502,
    '3в': 1540,
    '3г': 1489,
    '4а': 1663,
    '4б': 1656,
    '4в': 1595,
    '4г': 1533,
    '5а': 1588,
    '5б': 864,
    '5в': 1618,
    '5г': 1601,
    '6а': 1670,
    '6б': 1038,
    '6в': 1281,
    '6г': 1052,
  },
  cell_b2: {
    name: 'б2',
    '1а': 5074,
    '1б': 1762,
    '1в': 2967,
    '1г': 3452,
    '2а': 3438,
    '2б': 5463,
    '2в': 3766,
    '2г': 6798,
    '3а': 4947,
    '3б': 3827,
    '3в': 5586,
    '3г': 3957,
    '4а': 5289,
    '4б': 7399,
    '4в': 3919,
    '4г': 5258,
    '5а': 628,
    '5б': 284,
    '5в': 369,
    '5г': 6309,
    '6а': 6569,
    '6б': 574,
    '6в': 758,
    '6г': 635,
    '7а': 239,
    '7б': 6620,
    '7в': 741,
    '7г': 6415,
    '8а': 598,
    '8б': 352,
    '8в': 826,
    '8г': 6682,
    '9а': 6347,
    '9б': 6286,
    '9в': 6224,
    '9г': 6163,
    '10а': 1076,
    '10б': 1083,
    '10в': 925,
    '10г': 1380,
    '11а': 1137,
    '11б': 932,
    '11в': 949,
    '11г': 1311,
    '12а': 901,
    '12б': 1564,
    '12в': 1298,
    '12г': 956,
    '13а': 1243,
    '13б': 1649,
    '13в': 871,
    '13г': 1342,
    '14а': 1199,
    '14б': 1366,
    '14в': 1212,
    '14г': 1373,
    '15а': 895,
    '15б': 1359,
    '15в': 888,
    '15г': 1229,
  },
  cell_b3: {
    name: 'б3',
    '1а': 1236,
    '1б': 1625,
    '1в': 1496,
    '1г': 1090,
    '2а': 994,
    '2б': 987,
    '2в': 1519,
    '2г': 1007,
    '3а': 1069,
    '3б': 970,
    '3в': 1113,
    '3г': 857,
    '4а': 1267,
    '4б': 1328,
    '4в': 1205,
    '4г': 1304,
    '5а': 1250,
    '5б': 1441,
    '5в': 1434,
    '5г': 918,
    '6а': 1427,
    '6б': 1120,
    '6в': 1144,
    '6г': 963,
    '7а': 536,
    '7б': 6002,
    '7в': 6149,
    '7г': 6262,
    '8а': 437,
    '8б': 6385,
    '8в': 5999,
    '8г': 6200,
    '9а': 5944,
    '9б': 5968,
    '9в': 5975,
    '9г': 6088,
    '10а': 208,
    '10б': 840,
    '10в': 6576,
    '10г': 5951,
    '11а': 4183,
    '11б': 4480,
    '11в': 7351,
    '11г': 5050,
    '12а': 833,
    '12б': 468,
    '12в': 529,
    '12г': 345,
    '13а': 642,
    '13б': 710,
    '13в': 6637,
    '13г': 6330,
    '14а': 765,
    '14б': 6736,
    '14в': 6866,
    '14г': 6903,
    '15а': 703,
    '15б': 6491,
    '15в': 6095,
    '15г': 6552,
  },
  cell_b4: {
    name: 'б4',
    '1а': 10177,
    '1б': 10115,
    '1в': 10153,
    '1г': 10092,
    '2д': 9119,
    '2е': 9782,
    '2ж': 8488,
    '2з': 3803,
    '2а': 10238,
    '2б': 10290,
    '2в': 10351,
    '2г': 10412,
    '3а': 10535,
    '3б': 10474,
    '3в': 10597,
    '3г': 10658,
    '4а': 10719,
    '4б': 10894,
    '4в': 10832,
    '4г': 10771,
    '5а': 5937,
    '5б': 482,
    '5в': 604,
    '5г': 420,
    '6а': 789,
    '6б': 6422,
    '6в': 406,
    '6г': 222,
    '7а': 499,
    '7б': 253,
    '7в': 796,
    '7г': 215,
    '8а': 376,
    '8б': 321,
    '8в': 192,
    '8г': 260,
    '9а': 4329,
    '9б': 4312,
    '9в': 4350,
    '9г': 4923,
    '10а': 4374,
    '10б': 4213,
    '10в': 4428,
    '10г': 4411,
    '11а': 4398,
    '11б': 4251,
    '11в': 4589,
    '11г': 4596,
    '12а': 4602,
    '12б': 4534,
    '12в': 4268,
    '12г': 4442,
    '13а': 4572,
    '13б': 4541,
    '13в': 4367,
    '13г': 4404,
    '14а': 4299,
    '14б': 4435,
    '14в': 4671,
    '14г': 4657,
    '15а': 4244,
    '15б': 4336,
    '15в': 4343,
    '15г': 4558,

  },
  cell_b5: {
    name: 'б5',
    '1а': 3674,
    '1б': 2875,
    '1в': 5791,
    '1г': 3551,
    '2а': 5081,
    '2б': 5326,
    '2в': 5739,
    '2г': 5715,
    '3а': 5876,
    '3б': 6828,
    '3в': 5067,
    '3г': 5098,
    '4а': 5425,
    '4б': 5746,
    '4в': 1915,
    '4г': 3308,
    '5а': 5722,
    '5б': 5104,
    '5в': 5333,
    '5г': 5432,
    '6а': 819,
    '6б': 697,
    '6в': 291,
    '6г': 475,
    '7а': 413,
    '7б': 6170,
    '7в': 390,
    '7г': 451,
    '8а': 277,
    '8б': 338,
    '8в': 802,
    '8г': 512,
    '9а': 444,
    '9б': 567,
    '9в': 505,
    '9г': 680,
    '10а': 6323,
    '10б': 611,
    '10в': 6507,
    '10г': 383,
    '11а': 10245,
    '11б': 10306,
    '11в': 10368,
    '11г': 10429,
    '12а': 10870,
    '12б': 10818,
    '12в': 10757,
    '12г': 10696,
    '13а': 10672,
    '13б': 10610,
    '13в': 10559,
    '13г': 10498,
    '14а': 10917,
    '14б': 10856,
    '14в': 10795,
    '14г': 10733,
    '15а': 10139,
    '15б': 10191,
    '15в': 10252,
    '15г': 10313,
    '16а': 9348,
    '16б': 2769,
    '16в': 9744,
    '16г': 2271,
  },
  cell_b6: {
    name: 'б6',
    '1а': 6392,
    '1б': 6125,
    '1в': 314,
    '1г': 7559,
    '2а': 6316,
    '2б': 6378,
    '2в': 6248,
    '2г': 6439,
    '3а': 6194,
    '3б': 6255,
    '3в': 6071,
    '3г': 6675,
    '4а': 5852,
    '4б': 659,
    '4в': 581,
    '4г': 6101,
    '5а': 6231,
    '5б': 6293,
    '5в': 6354,
    '5г': 6477,
    '6а': 6538,
    '6б': 6651,
    '6в': 6712,
    '6г': 6590,
  },
  cell_b7: {
    name: 'б7',
    '1а': 10221,
    '1б': 10283,
    '1в': 10528,
    '1г': 10467,
    '2а': 10108,
    '2б': 10160,
    '2в': 10344,
    '2г': 10405,
    '3а': 10726,
    '3б': 10788,
    '3в': 10900,
    '3г': 10849,
    '4а': 10481,
    '4б': 10542,
    '4в': 10603,
    '4г': 10665,
    '5а': 10122,
    '5б': 10184,
    '5в': 10801,
    '5г': 10740,
    '6а': 10504,
    '6б': 10566,
    '6в': 10627,
    '6г': 10689,
    '7а': 10269,
    '7б': 10320,
    '7в': 10382,
    '7г': 10443,
    '8а': 6408,
    '8б': 6460,
    '8в': 6521,
    '8г': 6583,
    '9а': 6705,
    '9б': 6118,
    '9в': 6361,
    '9г': 6644,
    '10а': 6446,
    '10б': 550,
    '10в': 734,
    '10г': 673,
    '11а': 4749,
    '11б': 5012,
    '11в': 4930,
    '11г': 4992,
    '12а': 4800,
    '12б': 4466,
    '12в': 4473,
    '12г': 4763,
    '13а': 4794,
    '13б': 4824,
    '13в': 4831,
    '13г': 4916,
    '14а': 4770,
    '14б': 4497,
    '14в': 3476,
    '14г': 4909,
    '15а': 3483,
    '15б': 3506,
    '15в': 3513,
    '15г': 4756,
    '16а': 10924,
    '16б': 10863,
    '16в': 10146,
    '16г': 10207,
    '17а': 3704,
    '17б': 3544,
    '17в': 4305,
    '17г': 3391,
    '18а': 3575,
    '18б': 3582,
    '18в': 4282,
    '18г': 3605,
  },
  cell_a1: {
    name: 'а1',
    '1а': 12424242,
    '1б': 12412424,
    '1в': 3524242,
    '2а': 12424242,
    '2б': 12412424,
    '2в': 3524242,
    '3а': 12424242,
    '3б': 12412424,
    '3в': 3524242,
    '4а': 12424242,
    '4б': 12412424,
    '4в': 3524242,
    '5а': 12424242,
    '5б': 12412424,
    '5в': 3524242,
    '6а': 12424242,
    '6б': 12412424,
    '6в': 3524242,
  },
  cell_a2: {
    name: 'а2',
    '1а': 12424242,
    '1б': 12412424,
    '1в': 3524242,
    '2а': 12424242,
    '2б': 12412424,
    '2в': 3524242,
    '3а': 12424242,
    '3б': 12412424,
    '3в': 3524242,
    '4а': 12424242,
    '4б': 12412424,
    '4в': 3524242,
    '5а': 12424242,
    '5б': 12412424,
    '5в': 3524242,
    '6а': 12424242,
    '6б': 12412424,
    '6в': 3524242,
    '7а': 12424242,
    '7б': 12412424,
    '7в': 3524242,
  },
  cell_a3: {
    name: 'а3',
    '1а': 12424242,
    '1б': 12412424,
    '1в': 3524242,
    '2а': 12424242,
    '2б': 12412424,
    '2в': 3524242,
    '3а': 12424242,
    '3б': 12412424,
    '3в': 3524242,
    '4а': 12424242,
    '4б': 12412424,
    '4в': 3524242,
    '5а': 12424242,
    '5б': 12412424,
    '5в': 3524242,
    '6а': 12424242,
    '6б': 12412424,
    '6в': 3524242,
    '7а': 12424242,
    '7б': 12412424,
    '7в': 3524242,
  },
  cell_a4: {
    name: 'а4',
    '1а': 12424242,
    '1б': 12412424,
    '1в': 3524242,
    '2а': 12424242,
    '2б': 12412424,
    '2в': 3524242,
    '3а': 12424242,
    '3б': 12412424,
    '3в': 3524242,
    '4а': 12424242,
    '4б': 12412424,
    '4в': 3524242,
    '5а': 12424242,
    '5б': 12412424,
    '5в': 3524242,
    '6а': 12424242,
    '6б': 12412424,
    '6в': 3524242,
    '7а': 12424242,
    '7б': 12412424,
    '7в': 3524242,
    '8а': 12424242,
    '8б': 12412424,
    '8в': 3524242,
    '9а': 12424242,
    '9б': 12412424,
    '9в': 3524242,
  },
  cell_a5: {
    name: 'а5',
    '1а': 12424242,
    '1б': 12412424,
    '1в': 3524242,
    '2а': 12424242,
    '2б': 12412424,
    '2в': 3524242,
    '3а': 12424242,
    '3б': 12412424,
    '3в': 3524242,
    '4а': 12424242,
    '4б': 12412424,
    '4в': 3524242,
    '5а': 12424242,
    '5б': 12412424,
    '5в': 3524242,
    '6а': 12424242,
    '6б': 12412424,
    '6в': 3524242,
    '7а': 12424242,
    '7б': 12412424,
    '7в': 3524242,
    '8а': 12424242,
    '8б': 12412424,
    '8в': 3524242,
    '9а': 12424242,
    '9б': 12412424,
    '9в': 3524242,
  },
  cell_a6: {
    name: 'а6',
    '1а': 12424242,
    '1б': 12412424,
    '1в': 3524242,
    '2а': 12424242,
    '2б': 12412424,
    '2в': 3524242,
    '3а': 12424242,
    '3б': 12412424,
    '3в': 3524242,
    '4а': 12424242,
    '4б': 12412424,
    '4в': 3524242,
    '5а': 12424242,
    '5б': 12412424,
    '5в': 3524242,
    '6а': 12424242,
    '6б': 12412424,
    '6в': 3524242,
    '7а': 12424242,
    '7б': 12412424,
    '7в': 3524242,
  },
  cell_a7: {
    name: 'а7',
    '1а': 12424242,
    '1б': 12412424,
    '1в': 3524242,
    '2а': 12424242,
    '2б': 12412424,
    '2в': 3524242,
    '3а': 12424242,
    '3б': 12412424,
    '3в': 3524242,
    '4а': 12424242,
    '4б': 12412424,
    '4в': 3524242,
  },
  
}






const findObjects = (findString) => {
  searchResults.innerHTML = ''
  searchResults.setAttribute('hidden', '')
  
  let string = findString.toLowerCase().split('.')
  let results = []
  let subCells = []
  if (searchArea.value != '') {

  for (let key in Cells) {
    let cellName = Cells[key]['name']

    if (cellName.startsWith(string[0])) {
      searchResults.removeAttribute('hidden', '')

      
      for (let subKey in Cells[key]) {
        if(subKey != 'name'){
          subCells.push(subKey)
        }
      }
      
      if (string.length > 1) {
        let findedCells = subCells.forEach((elem) => {
          if(elem.startsWith(string[1])) {
            results.push(`${cellName}.${elem}`)
          }
          
        })
      }else {
        subCells.forEach((elem) => {
          results.push(`${cellName}.${elem}`)
        })
      }

  
     
    }
  }
  results.forEach((elem) => {
    searchResults.insertAdjacentHTML('beforeend',`<span class="mainText">
      ${elem.toUpperCase()}
      </span>`)
  })  
}
}


const searchResults = document.querySelector('.searchResults')
const imgBarCode = document.querySelector('#barcode')
const searchArea = document.querySelector('.searchArea')
const searchText = document.querySelector('.mainText')
const cellArea = document.querySelector('.cellArea')
searchArea.addEventListener('input', () => findObjects(searchArea.value))
searchResults.addEventListener('click', (event) => clickOnCell(event.target.textContent))







const getCell = (cell) => {
  let findingCell = cell.trim().toLowerCase().split('.')
  for (let key in Cells) {
    let currentCell = Cells[key]
    if (currentCell['name'] == findingCell[0]) {
      let finalCellName = (currentCell['name'] +'.' + findingCell[1]).toUpperCase()
      let finalBarCode = currentCell[findingCell[1]]

      
      return {
        cellName: finalCellName,
        barCode: createBarCode(finalBarCode),
      }
    }
  }
}

const clickOnCell = (target) => {
  if(searchArea.value != '') {  
    searchArea.value = ''
    findObjects(searchArea.value)

    let cell = getCell(target)

    JsBarcode("#barcode", cell['barCode']);
    cellArea.innerHTML = 
      `<span class="resultText">
      Ячейка: ${cell['cellName']}

      </span>`
    
  }
  }




